# alertmanager/alertmanager.yml.tmpl
global:
  resolve_timeout: 5m

route:
  receiver: 'telegram'
  group_by: ['alertname', 'instance']
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 3h

receivers:
  - name: 'telegram'
    telegram_configs:
      - api_url: 'https://api.telegram.org'
        bot_token: '${TELEGRAM_BOT_TOKEN}'  # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
        chat_id: ${TELEGRAM_CHAT_ID}     # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
        send_resolved: true
        parse_mode: 'HTML'   
        message: |
          {{ if .Alerts.Firing }}
          üî¥ <b>Alert Firing</b>
          {{ range .Alerts }}
          - <b>Summary</b>: {{ .Annotations.summary }}
          - <b>Description</b>: {{ .Annotations.description }}
          - <b>Instance</b>: {{ .Labels.instance }}
          {{ end }}
          {{ else }}
          ‚úÖ <b>Alert Resolved</b>
          {{ range .Alerts }}
          - <b>Summary</b>: {{ .Annotations.summary }}
          - <b>Description</b>: {{ .Annotations.description }}
          - <b>Instance</b>: {{ .Labels.instance }}
          {{ end }}
          {{ end }}